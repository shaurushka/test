\documentclass[12pt,twoside]{article}
\usepackage{jmlda}
\newcommand{\hdir}{.}

%\NOREVIEWERNOTES
\title
    [Параллельные тексты в задаче дешифровки древнерусских знаменных песнопений] % Краткое название; не нужно, если полное название влезает в~колонтитул
 {Параллельные тексты в задаче дешифровки древнерусских знаменных песнопений}
\author
%[Бахмутова~И.\,В., Гусев~В.\,Д., Мирошниченко~Л.\,А., Титкова ~Т.\,Н.]
     % список авторов для колонтитула; не нужен, если основной список влезает в колонтитул
    {И.\,В. Бахмутова, В.\,Д. Гусев, Л.\,А. Мирошниченко, Т.\,Н. Титкова} % основной список авторов, выводимый в оглавление
%    [[Бахмутова~И.\,В., Гусев~В.\,Д., Мирошниченко~Л.\,А., Титкова ~Т.\,Н.] % список авторов, выводимый в заголовок; не нужен, если он не отличается от основного
\thanks
    {Работа выполнена при финансовой поддержке РФФИ, проект \No\,13-07-00400.}
\email
    {gusev@math.nsc.ru, luba@math.nsc.ru}
\organization
    {Новосибирск, Институт математики им. С. Л. Соболева СО РАН}
\abstract
    {Предложен новый компьютерно-ориентированный подход к проблеме нотолинейной реконструкции (дешифровки) древнерусских церковных песнопений XVI--XVII вв., представленных в знаменной форме записи. В основе подхода лежит анализ двознаменников --- певческих книг, записанных в виде трех параллельных (синхронизованных между собой) текстов: знаменного, нотолинейного и стихотворного (старославянского). Введены понятия инвариантов и квазиинвариантов знаменного распева.
Разработан алгоритм выделения их из обучающего материала (двознаменники) и использования для целей дешифровки. Получены оценки эффективности подхода  на независимом  контрольном материале.
Основ\-ным достоинствам  подхода является  ориентация его на общий случай беспометной нотации.

\bigskip
\textbf{Ключевые слова}: \emph {параллельные тексты; знаменные песнопения;
двознаменники; дешифровка; инварианты; квазиинварианты}}
\titleEng
    {Parallel texts in the problem of deciphering of~ancient~Russian~chant}
\authorEng
    {I.\,V. Bakhmutova, V.\,D. Gusev, L.\,A. Miroshnichenko, and~T.\,N.~Titkova}
\organizationEng
    {Sobolev Institute of Mathematics of the Siberian Branch of the Russian Academy of Sciences, Novosibirsk, Russia}
\abstractEng
        {\noindent
The ancient Russian chants of XII–XVII centuries are presented in the neume writing form.
The problem of chant translation into modern note writing is of deciphering
character and, in the general case (chants without  special marks that explain
their singing value), is not yet solved.
The number of ``unreadable'' ancient hymnals runs into the hundreds. The main
difficulties of deciphering are connected with the polysemy of correspondence
``neume--note.'' The known examples of deciphering are few in number,
made by manually, and refer to the separate hymn.
%
     The authors develop a new computer-oriented approach to the solution of this problem using the dvoyeznamenniks of the end of  XVII – beginning of  XVIII centuries where the chants are written in three (synchronized between each other) parallel text: in neumes,
in notes, and in old Slavonic verses. The emphasis places on revealing in texts of dvoyeznamenniks not very long repeating  chains of neumes that are interpreted either unambiguously (invariants) or with admissible deviations (quasi-invariants).
%
     On the basis of rather extensive learning material,
 the electronic dictionaries of invariants and quasi-invariants were constructed. The algorithm of deciphering of neumatic notation using these dictionaries was developed. The experiments on the control material have shown that at this stage (without appellation to the structural organization of neumatic hymnals), these dictionaries provide the deciphering
of~60\%--70\% of neumatic text.
        %
The main features of the presented approach are: use of dvoyeznamenniks  of the golden age period of Russian chant in different genres and orientation, in general, toward the neumatic notation without special marks from XVI--XVII centuries.




		\bigskip
\noindent
    \textbf{Keywords}: \emph{parallel texts; the ancient Russian chants;
dvoyeznamenniks; deciphering; invariants; quasi-invariants}}
\begin{document}
\maketitle
%\linenumbers
\section{Введение}

Древнерусские церковные песнопения XII--XVIII~вв. представлены преимущественно
в~знаменной форме записи. Проблема перевода их в современную нотолинейную
форму носит дешифровочный характер и в общем случае (песнопения раннего
и среднего периодов) остается нерешенной. Знамена (или крюки) --- специальные знаки, служащие для передачи мелодии. Они интерпретируются цепочками нот разной длины (обычно от одного до пяти нотных знаков). Общие сведения о знаменном (или крюковом) пении можно найти в \cite{Brazhnikov}. По оценкам, приведенным в \cite{Kutuzov}, количество известных певческих рукописей измеряется на данный момент более чем тысячью экземпляров, из них читаемыми (с существенными оговорками \cite{ngk_2002,ngk_2004}) считаются лишь около половины.

Особый интерес в плане дешифровки представляют так называемые
\emph{двознаменники} (см.~[1, гл.~12]). Это певческие книги конца XVII\,--\,начала XVIII вв., содержащие песнопения, записанные в виде трех синхронизованных \, \emph{параллельных текстов}: знаменного, нотолинейного и стихотворного (старославянский язык). Количество известных двознаменников невелико (порядка десятка \cite{Brazhnikov}). Именно они лежат в основе предлагаемого
авторами подхода к дешифровке. Часть из них используется для обучения, другая --- для контроля. Этому предшествовала достаточно объемная и кропотливая работа по переводу двознаменников в цифровую форму, поскольку программ распознавания знаменной нотации на данный момент, насколько
известно авторам, не существует.

Немногочисленные известные примеры дешифровки знаменной нотации сделаны
вручную и касаются отдельных песнопений (или узких классов песнопений), эволюцию которых можно проследить по архивным материалам в течение достаточно
длительного периода. Существенную роль при этом играет наличие графически близких византийских версий. Подготовленные
авторами электронные версии двознаменников охватывают песнопения разных жанров и позволяют использовать для дешифровки новые подходы, превышающие по своей трудоемкости возможности исследователей, работающих вручную. Эти подходы основаны на введенных авторами
понятиях \emph{инвариантов и квазиинвариантов} знаменного распева.

Целью работы является описание алгоритма дешифровки, использующего
параллельные тексты двознаменников, и оценка его эффективности.
Проводится анализ ошибок и~рассматриваются возможности дальнейшего продвижения.

\section{Краткие сведения о знаменном распеве}

В истоках знаменного распева лежит древнегреческое церковное пение на 8 ладов
(гласов): дорийский, фригийский и т.\,д. (так называемая \emph{система
осмогласия} \cite{Brazhnikov}). Начало сис\-те\-ме положил обычай в каждый из
 восьми дней Пасхи исполнять песнопения на особый напев. Восьмидневный цикл напевов, которые хор исполнял в унисон, был  распространен затем на 8 недель, а одноголосный (монодия) напев  конкретного дня повторялся в течение соответствующей ему по порядку недели. Восемь недель составляли столп, который циклически повторялся в течение года.
	
	В русском осмогласии понятие гласа как лада деформировалось,
а средством мелодической характеристики гласа стала выступать
\emph{совокупность попевок}, т.\,е.\ мелодических оборотов (в нашей терминологии --- \emph{ элементарных структурных единиц} знаменного распева). Наиболее характерные для каждого гласа попевки представлены в подборке В.~М.~Металлова \cite{Metallov}. Но они не определяют однозначным образом гласовую принадлежность песнопения, поскольку некоторые попевки встречаются в песнопениях разных гласов.
	
	Восемь гласов охватывают  практически весь  попевочный фонд  церковного пения. Каждое песнопение, как правило, принадлежит одному из 8 гласов и строится на попевках данного гласа. Гласовая принадлежность песнопения обычно указывается в явном виде. Сказанное выше означает, что любой алгоритм дешифровки должен учитывать подчиненность песнопения системе осмогласия, поскольку  одно и то же знамя может иметь разную интерпретацию в зависимости от гласа, типа структурной единицы, в состав которой оно входит, ее позиции в тексте и ряда других факторов.

Характер многозначности соответствия <<знамя--нота>> отражен в построенной
авторами на основе двознаменников электронной азбуке знаменного
распева \cite{vs174}. Некоторые знамена, например такие, как
\includegraphics[height =12pt]{\hdir/z1002.eps} (статья закрытая малая) или
\includegraphics[height =12pt]{\hdir/z1004.eps}  (статья простая с подверткой),
имеют до 10 различных интерпретаций, отличающихся друг от друга ин\-тер\-валь\-но-ритмическими характеристиками. При этом каждая из интерпретаций может иметь несколько звуковысотных привязок. Именно с \emph{многозначностью соответствия <<знамя--но\-та>>} связаны основные проблемы дешифровки.

Начиная с XVII в., знамена начинают снабжать \emph{степенными и указательными пометами}. Первые уточняют высоту распева знамени, вторые --- особенности его распева. Термин <<читаемые>> относится к пометным песнопениям, хотя и здесь однозначный результат не гарантирован (см. \cite{ngk_2002,ngk_2004}). Беспометные рукописи XVI в. и более раннего периода практически нечитаемы.

Для устранения неоднозначности можно привлекать контекст, что эквивалентно переходу от отдельных знамен к более крупным структурным единицам, таким как \emph{попевки, лица, фиты} и др. Однако известные подборки этих структурных единиц (азбуки, кокизники, фитники) малопригодны для целей дешифровки из-за формы их представления. Так, в подборке В.~М.~Металлова \cite{Metallov} попевки приведены только в нотолинейной форме, а в подборке М.~В.~Бражникова \cite{fita} около половины лиц и фит имеют лишь знаменное представление вместо двознаменного, требуемого для дешифровки.

Песнопения, представленные в двознаменниках, записаны в диапазоне
\emph{обиходного звукоряда} (рис. 1), включающего ноты $G$, $A$, $H$ (малой октавы), $c$, $d$, $e$, $f$, $g$, $a$, $b$ (первой октавы), $C$, $D$ (второй октавы). В пометных рукописях ступеням звукоряда соответствуют обозначения
\includegraphics[height =12pt]{\hdir/p_vopros.eps}, \includegraphics[height =12pt]{\hdir/p_dollar.eps}, \includegraphics[height =12pt]{\hdir/p_c.eps}, \includegraphics[height =12pt]{\hdir/p_g.eps},  \includegraphics[height =12pt]{\hdir/p_n.eps}, \includegraphics[height =12pt]{\hdir/p_s.eps},    \includegraphics[height =12pt]{\hdir/p_m.eps}, \includegraphics[height =12pt]{\hdir/p_p.eps},  \includegraphics[height =12pt]{\hdir/p_v.eps}, \includegraphics[height =12pt]{\hdir/p_zvezda.eps}, \includegraphics[height =12pt]{\hdir/p_resh.eps}, \includegraphics[height =12pt]{\hdir/p_voskl.eps}. Соответствующая знамени степенная помета указывает на наивысший звук в его распеве \cite{Brazhnikov}.

\begin{figure}[h!]
\centering
\begin{center}
\includegraphics[height=100pt]{\hdir/obikh_zvukor.eps}
\caption{Обиходный звукоряд}
\end{center}
\end{figure}%\vspace{-0.5cm}


Особенности нотолинейной интерпретации знамен поясняются с помощью указательных
помет: \includegraphics[scale=1]{\hdir/tikho.eps}
(или \includegraphics[scale=1]{\hdir/tikho_T.eps}) --– тихая;
\includegraphics[scale=1]{\hdir/lomka.eps}  --- ломка;
\includegraphics[scale=1]{\hdir/borzo.eps}  --– борзая;
\includegraphics[scale=1]{\hdir/udarka.eps}  --– ударка;
 \includegraphics[scale=1]{\hdir/kachka.eps}  --– качка (или купно);
\includegraphics[scale=1]{\hdir/zevok.eps}  --– зевок;
\includegraphics[scale=0.75]{\hdir/ravno.eps}  --- равно.
Знамена с указательной пометой и без нее трактуются как
разные, поскольку могут иметь отличающиеся распевы.
      Длительности звуков обозначаются следующим образом:
\includegraphics[scale=1]{\hdir/n_1.eps}  --– 1 (целая);
\includegraphics[scale=1]{\hdir/n_1_2.eps}  --- 2 (половинная);
\includegraphics[scale=1]{\hdir/n_1_4.eps}  --– 4 (четвертная);
\includegraphics[scale=1]{\hdir/n_1_8.eps} --– 8 (восьмая). Для
обозначения высоты и длительности звука используем комбинацию буквы
и цифры (например, $H4$ --- это четвертная нота «си» малой октавы).
Знак $(*)$ используется в качестве разделителя между нотолинейными
интерпретациями разных знамен, а~($\sim$)~--- как символ эквивалентности, отделяющий знаменную цепочку от ее нотолинейного представления (например, запись \includegraphics[height =12pt]{\hdir/z1701n.eps} \includegraphics[height =12pt]{\hdir/z0511L.eps} $\sim d4c4d2*c4e4$ означает, что цепочка из двух знамен, стоящая слева от  ($\sim $), интерпретируется в тексте двознаменника, соответственно, цепочками из трех и двух нот, отделенными друг от друга знаком $(*)$).

\section{Описание подхода}

На данный момент мы располагаем электронными версиями трех двознаменников конца XVII -- начала XVIII в. Это разные редакции многожанровой певческой книги <<Октоих>> из Соловецкого собрания Российской национальной библиотеки, г.~С.-Петербург (шифры 618/644, 619/647, QI188). Число песнопений в разных гласах двух первых
Октоихов варьи\-ру\-ет в диапазоне от 25 до 29, для QI188 этот показатель
на треть ниже. Длины песнопений составляют от нескольких десятков до двух--трех
сотен знамен. На основе этого (обучающего) материала была построена электронная азбука знаменного распева \cite{vs174}, выгодно отличающаяся от известных авторских
азбук по многим показателям, в~част\-ности наличием информации о частоте встречаемости
и звуковысотной привязке различных интерпретаций каждого знамени в каждом гласе.

Анализ электронной азбуки показал, что при всей вариативности знаменного распева в каждом гласе существует некоторое количество знамен, не меняющих своей интерпретации. Обычно их доля не превышает 10\% от размера алфавита. В связи с этим возникло предположение о наличии в общем случае повторяющихся\footnote{Требование повторяемости является принципиальным, поскольку оно исключает из рассмотрения однократно встречающиеся цепочки знамен. Такими, начиная с некоторого $L$, являются практически все достаточно длинные цепочки} цепочек знамен произвольной длины $L$ ($L \geq 1$), однозначно или почти однозначно (с допустимыми отклонениями) интерпретируемых в пределах одного гласа. Цепочки первого типа естественно называть \emph{внутригласовыми инвариантами} ({ВИ}),
а второго --- \emph{квазиинвариантами} ({КВИ}). Их можно трактовать как особый тип структурных единиц, своего рода <<островки стабильности>>, характеризующиеся существенным снижением уровня неоднозначности в интерпретации знамен.

В работах \cite{muz_nauka, zont_2013} гипотеза о наличии в текстах двознаменников
цепочек знамен со свойствами {ВИ} и {КВИ} подтверждена экспериментально
на указанном выше материале. Для каждого из 8 гласов построены словари {ВИ}
и~{КВИ}, разбитые на подсловари в соответствии со значениями $L = 1,2,\ldots $
Алгоритмы выделения {ВИ} и {КВИ} основаны на следующих соображениях:
\begin{enumerate}[1)]
\item элементами словарей {ВИ} и {КВИ} могут быть, как уже говорилось выше,
лишь цепочки знамен, повторяющиеся в конкретном гласе, так как понятие
инвариантности подразумевает сохранение нотолинейной интерпретации
(в строгом смысле или с допустимыми вариациями) при повторении  цепочки.
Требование повторяемости  в неявной форме ограничивает длины {ВИ} и {КВИ},
так как  с увеличением  длин цепочек частота $F$ их встречаемости в гласе
падает. Число просматриваемых цепочек можно ограничить, введя пороговое
значение $F_r$. При $F < F_r$  цепочка выбывает из рассмотрения.
Будем использовать пороговое значение $F_r = 3$;

\item цепочка, составленная из многозначных знамен, может оказаться
однозначно или почти однозначно интерпретируемой в гласе. Поэтому при
формировании словарей {ВИ} и~{КВИ}  должен быть рассмотрен полный спектр
цепочек произвольной длины c $F \geq F_r$ в~подборке песнопений, представляющих конкретный глас;

\item формировать словари {ВИ} и {КВИ} следует на основе \emph{беспометных}
текстов. Тогда словари будут иметь формат <<беспометное знамя\,--\,нота>>,
единственно пригодный для реше\-ния задачи дешифровки в общем случае
(беспометная нотация). Указанные двознаменники содержат пометы, которые следует предварительно устранить. Это равносильно агрегированию исходного знаменного алфавита, при котором в одну группу объединяются и обозначаются одним символом все пометные и беспометные варианты конкретного знамени.
Так, в  одну группу будут объединены \includegraphics[height =12pt]{\hdir/z1862.eps}
(стрела мрачная крыжевая с оттяжкой), она же с указательной пометой <<борзо>>
( \includegraphics[height =12pt]{\hdir/z1862B.eps}) и <<тихая>>
(\includegraphics[height =12pt]{\hdir/z1862T.eps}), имеющие разные распевы.
Предполагается, что в словарях {ВИ} и {КВИ} <<агрегированная стрела>> будет встречаться  в разных контекстах, определяющих тот или иной вариант ее распева;

\item возможны различные варианты определения {КВИ}. В используемом
авторами приближении цепочка знамен трактуется как {КВИ}, если одна из
ее интерпретаций доминирует над остальными по частоте, а именно:
выполняется соотношение $F_{\mathrm{dom}} / F > 1/2$, где~$F$~---
частота встречаемости цепочки в песнопениях гласа; $F_{\mathrm{dom}}$~---
максимальная из частот встречаемости ее интерпретаций.
Доминирующая интерпретация трактуется в дальнейшем как значение {КВИ}.
Важно отметить, что понятия {ВИ} и {КВИ} имеют относительный характер:
они зависят от объема и состава исходной (обучающей) подборки. При
увеличении ее объема или изменении жанрового состава отдельные {ВИ}
могут перейти в категорию {КВИ}, а некоторые {КВИ} перестают быть таковыми (<<исчезает>> доминирующая интерпретация). Эффекты такого рода можно проследить при переходе от отдельных Октоихов (так строились словари, описанные в \cite{muz_nauka, zont_2013}) к их совокупности (в данной работе словари формируются на основе всех трех Октоихов).
\end{enumerate}

Построенные по двознаменным Октоихам словари {ВИ} и {КВИ}, представленные
в формате <<беспометное знамя\,--\,нота>>, служат основой для нотолинейной реконструкции контрольных \emph{беспометных} песнопений. В качестве контрольного материала
авторы использовали пометный двознаменник <<Праздники>> (РНБ, г.~С.-Петербург,
Кирилло-Белозерское собрание, шифр 797/1054) и фрагмент двознаменного Ирмология
из собрания В.\,Ф.~Одоевского (М., РГБ, Ф210. \No 18). Пометы в обоих случаях
предварительно удалялись, т.\,е.\ на вход алгоритма дешифровки подавались беспометные знаменные песнопения, а нотолинейная компонента указанных двознаменников использовалась лишь для сравнения реконструированного распева с реальным.

Схема дешифровки фактически сводится к покрытию песнопения всевозможными
цепочками знамен из словарей {ВИ} и {КВИ} и приписыванию найденным фрагментам
их певческого значения, зафиксированного в словарях. При этом возможны отказы
(не существует ни одного {ВИ} или {КВИ}, покрывающего данное знамя) и конфликты
 интересов (знамя входит в состав разных {ВИ} или {КВИ}, где ему приписываются неидентичные певческие значения). Более детально процесс дешифровки описан ниже.


\section{Алгоритм дешифровки. Результаты апробации}

Пусть $T = t_1t_2 \cdots t_n \cdots t_N $ --- представление песнопения
одного из 8 гласов в виде последовательности знамен. Гласовая
принадлежность песнопения обычно известна, хотя возможны исключения, и тогда
это становится предметом отдельного рассмотрения. Покрытие песнопения цепочками
знамен из словарей {ВИ} и {КВИ}, построенных для данного гласа, осуществляется
итеративно по $L$,
т.\,е. сначала используются {ВИ} и {КВИ} длины 1, затем длины 2 и т.\,д.
При $L = 1$ произвольное знамя $t_n$ песнопения, расположенное
в $n$-й позиции, может быть покрыто единожды, если найдется идентичный
ему {ВИ} или {КВИ} длины 1. В таком случае открываем список возможных
интерпретаций знамени $t_n$ из подсловаря инвариантов длины 1. При $L=2$
знамя $t_n$ может быть покрыто дважды, если среди {ВИ} ({КВИ}) длины 2 найдутся цепочки, совпадающие с биграммами $t_{n - 1}t_n$ и $t_nt_{n+1}$ песнопения. В этом случае пополняем список возможных интерпретаций знамени $t_n$ его значениями в составе указанных выше биграммных инвариантов. Знамя $t_n$ при  $L=2$ может быть покрыто и единожды (заносим в список лишь одну интерпретацию) или не покрыто вовсе.

При $L \geq 3$ на каждой итерации имеем не более чем $L$ возможностей
покрытия знамени $t_n$ цепочками {ВИ} и {КВИ} длины $L$. Продолжаем
пополнять список возможных интерпретаций знамени $t_n$ вплоть до
исчерпания словарей {ВИ} и {КВИ} для данного гласа. Из множества
полученных певческих значений для $t_n$ выбираем самое частое. При
равенстве голосов фиксируем случайным образом любой вариант.

По итогам описанной процедуры каждое знамя в песнопении либо получает
единственную интерпретацию, хотя и не всегда правильную, либо не
покрывается ни одной из цепочек словарей {ВИ} и {КВИ}. Сравнение результатов реконструкции с реальным нотолинейным текстом позволяет оценить количество правильно интерпретированных знамен ($n_+$) и число знамен, трактовка которых отличается от истинной ($n_{-}$). Коэффициент покрытия песнопения цепочками из словарей
{ВИ} и {КВИ} определяем тогда в виде $k = n_+/N$, где $N$ --- число знамен в песнопении ($0 \leq k \leq 1$). Коэффициент покрытия гласа, представленного группой контрольных песнопений, можно определить либо как среднее коэффициентов покрытия   отдельных песнопений, либо в виде отношения $\overline{k}=\overline{n_+}/\overline{N}$, где $\overline{n_+}$ --- суммарное число знамен, правильно интерпретированных во всех песнопениях гласа, а $\overline{N}$ --- суммарная длина песнопений. Показатель  $\overline{k}$  характеризует эффективность использования словарей
{ВИ} и {КВИ} для дешифровки беспометных песнопений.

Для апробации подхода было проведено несколько экспериментов. В первом из них разделение данных, используемых для обучения и контроля, осуществлялось с помощью процедуры <<скользящего контроля>>. Суть ее (применительно к конкретному гласу) в следующем:
\begin{itemize}
\item песнопения $i$-го гласа ($1 \leq i \leq 8$) из трех Октоихов объединяются в одну группу \linebreak $T_i = T_{i1}T_{i2},\ldots$);

\item удаляется песнопение $T_{i1}$, а по оставшимся строятся словари {ВИ}
и~{КВИ};
\item с помощью построенных словарей вычисляется коэффициент покрытия $k_{i1}$ удаленного песнопения $T_{i1}$;
\item  $T_{i1}$ возвращается в исходную подборку, удаляется следующее
песнопение $T_{i2}$, и процесс повторяется до исчерпания всех $n_i$ песнопений $i$-й группы;
\item вычисляется усредненный показатель покрываемости песнопений $i$-го гласа: \linebreak $\overline{k_i} = (\sum_{l=1}^{n_i}k_{il})/n_i$.
\end{itemize}

Результаты эксперимента представлены в табл.~1. Из них следует, что в среднем по гласам правильно реконструируются порядка 70\%--80\% знамен. Однако эти оценки несколько завышены, поскольку поочередно удаляемые песнопения сохраняли какие-то связи
с~оставшимися, что при реконструкции повышало их шансы.
\begin{table}\small
\begin{center}
\begin{minipage}[t]{50mm}

\caption{Результаты первого эксперимента}
\vspace*{2ex}

\tabcolsep=20pt
\begin{tabular}{|c|c|}
\hline
  Гласы & $ \overline{k} $\\
\hline
1  &  0,786\\
2 & 0,701\\
3 & 0,744\\
4 & 0,730\\
5 & 0,735\\
6 & 0,685\\
7 & 0,801\\
8 &0,725 \\
\hline
\end{tabular}

\end{minipage}
\hfil
\begin{minipage}[t]{50mm}

\caption{Результаты второго эксперимента}
\vspace*{2ex}

\tabcolsep=20pt
\begin{tabular}{|c|c|}
\hline
  Гласы &  $ \overline{k} $ \\
\hline
1  &  0,690\\
2 & 0,518\\
3 & 0,726\\
4 & 0,652\\
5 & 0,603\\
6 & 0,546\\
7 &0,602\\
 8  & 0,543\\
\hline
\end{tabular}

\end{minipage}
\end{center}
\end{table}


Более реальные данные получены в ходе второго эксперимента, когда для контроля использовался двознаменник <<Праздники>> из Кирилло-Белозерского собрания (другая школа). Его в основном составляют стихиры, но они значительно отличаются от стихир из Октоихов сложностью и развитостью распева, вариативностью, широтой динамического диапазона. Количество песнопений в гласах было сопоставимо с аналогичным показателем для Октоихов 619/647 и 618/644 за исключением гласов 3 и 7, слабо представленных в двознаменнике <<Праздники>>. Использовался второй вариант коэффициента покрытия ($\overline{k}=\overline{n_+}/\overline{N}$). Результаты этого эксперимента приведены
в табл.~2.


Показатели покрываемости заметно снижаются, что объясняется существенными различиями  в обучающем и контрольном материале.

В третьем эксперименте контрольный материал был представлен 22 песнопениями первого гласа Ирмология. Коэффициент покрываемости этих песнопений инвариантами первого гласа, полученными на материале трех Октоихов, составил 0,687.

\section{Обсуждение результатов}

\begin{enumerate}[1.]
\item  Словари {ВИ} и {КВИ}, построенные на основе трех Октоихов, достаточно
представительны (в сумме порядка полутора тысяч цепочек знамен разной длины
в каждом гласе). Они в состоянии обеспечить дешифруемость контрольного
материала, близкую в среднем к~60\%--70\% даже при отсутствии помет у знамен. С определенной осторожностью подход может быть применен и к беспометным песнопениям XVI в. У авторов имеется минимальный опыт такого рода, однако достоверность реконструкции требует дополнительного исследования из-за отсутствия двознаменников, датированных указанным периодом.

\item Анализ покрываемости отдельных песнопений выявил редко встречающиеся аномалии --- песнопения с коэффициентами покрытия порядка 0,2 и ниже. Предварительный анализ показал, что причинами могут быть: \emph{неверно указанная гласовая принадлежность} песнопения (оно плохо дешифруется по словарю <<собственного>> гласа, но гораздо лучше по словарю другого); \emph{неоговариваемые звуковысотные переносы} отдельных фрагментов мелодии; \emph{наличие в песнопении большого количества лиц и фит} --- структурных единиц, относящихся к категории мелизматических украшений мелодии, когда на один слог текста приходится много звуков мелодии. Разводы лиц и фит <<рядовым>> знаменем не всегда стандартны. Их можно сравнить с идиомами в естественном языке. Индикатором лиц
и~фит в распеве является стихотворная компонента параллельных текстов.

\item Ошибочно трактуемые знамена часто располагаются между попевочными структурами. Среди таких <<связующих>>  знамен много высокочастотных: \; \includegraphics[height =12pt]{\hdir/z0121.eps},\; \includegraphics[height =12pt]{\hdir/z0511.eps},\; \includegraphics[height =12pt]{\hdir/z0211.eps},\; \includegraphics[height =12pt]{\hdir/z0201.eps}\; и пр. Порой они образуют тандемные повторы. Это удобный способ разнесения основных структурных единиц текста (в данном случае попевок) на нужное расстояние,
используемый в~разных языковых системах. Сложность дешифровки тандемов в том, что тандемному повтору на знаменном уровне не всегда соответствует повтор на нотолинейном уровне
(и~наоборот). Приведем реальный пример (рис. 2) дешифровки фрагмента песнопения первого гласа из двознаменника <<Праздники>> (лист 78 оборотный). Фрагмент начинается с~73-й позиции.


%\begin{table}[h!]
\begin{figure}[t]

\begin{tabular}[c]{cccccccccccc}
& $ + $ & $ + $ & $ + $ & &  ?  &  ?  &  ?  & $ + $  \\
поз. 73:  & \includegraphics[height =12pt]{\hdir/z0401.eps}  & \includegraphics[height =12pt]{\hdir/z0301.eps}  & \includegraphics[height =12pt]{\hdir/z1001.eps}& $\Bigl ($  &   \includegraphics[height =12pt]{\hdir/z0211.eps}  & \includegraphics[height =12pt]{\hdir/z0511.eps}   &  \includegraphics[height =12pt]{\hdir/z0121.eps}  &  \includegraphics[height =12pt]{\hdir/z0201.eps} & $\Bigr )$ \\
  & $d2$ & $e2$ & $d1$& & $d4H4$ & $c4d4$ & $e2$ & $e2$ &  \\
  & \; \; $d2 (7)$ & \; \;  $e2 (6)$ &  \; \; $d1 (4)$& &  \; \; $c4H4 (2)$  &  \; \; $e4f4 (1)$  &  \; \; $g2 (1)$ &  \; \; $e2 (1)$ &  \\
  &  &  & & &   &  \; \; $c4d4 (1)$  &  &  &  \\

\end{tabular}

\begin{tabular}[c]{ccccccccc}

&& $ - $ & ? & ? & ? & &   ?  &  ?    \\
поз. 80: & $\Bigl ($ & \includegraphics[height =12pt]{\hdir/z0211.eps}  & \includegraphics[height =12pt]{\hdir/z0511.eps}  & \includegraphics[height =12pt]{\hdir/z0121.eps}&  \includegraphics[height =12pt]{\hdir/z0201.eps}  &$\Bigr )$& \includegraphics[height =12pt]{\hdir/z0301.eps}   &  \includegraphics[height =12pt]{\hdir/z1001.eps}   \\
& & $d4H4$ & $c4d4$ & $e2$ & $c2$ & & $H2$ & $A1$    \\
& &  &  \; \; $e4f4 (1)$ &  \; \; $g2 (1)$ &  \; \; $e2(2)$ & &  \; \; $e2(2)$ &  \; \; $d1(2)$    \\
&  &  &  &  \; \; $e2 (1)$ &  \; \;  & &  \; \; & \; \;  $e1(2)$    \\
\end{tabular}

\begin{tabular}[c]{ccccccc}
& $ + $ &  $ + $ &  $ + $ &  $ + $ & $ + $ &   $ + $      \\
поз. 86:  & \includegraphics[height =12pt]{\hdir/z0111.eps}  & \includegraphics[height =12pt]{\hdir/z0401.eps}  & \includegraphics[height =12pt]{\hdir/z0511.eps}&  \includegraphics[height =12pt]{\hdir/z0121.eps}  & \includegraphics[height =12pt]{\hdir/z0301.eps}   &  \includegraphics[height =12pt]{\hdir/z1001.eps}   \\
& $e2$ & $d2$ & $e4f4$ &  $g2$ &$f2$& $e1$    \\
&  \; \; $e2(4)$ &  \; \; $d2(4)$ & \; \; $e4f4 (3)$ & \; \; $g2 (5)$ & \; \; $f2(4)$ &  \; \; $e1(2)$    \\


\end{tabular}

\caption{Пример дешифровки фрагмента песнопения
}
\end{figure}

%\end{table}


Здесь каждая строка двознаменного текста --- это последовательность знамен,
а ниже~--- их певческие значения. Каждое знамя помечено сверху одним из трех
символов: <<-->> означает, что знамя не покрыто ни одним {ВИ} или {КВИ};
<<+>> означает, что знамя интерпретировано правильно; в третьей строке
его певческое значение повторено с указанием (в~скобках) числа проголосовавших
за него {ВИ} и  КВИ; <<?>> говорит о том, что знамя интерпретировано неверно,
в этом случае в третьей строке приводится ошибочная трактовка, одна или
несколько (строки 4, 5 и т.\,д.), если за них подано одинаковое число голосов.
В~строках 4, 5 и т.\,д. может быть представлено и истинное значение (см., например, знамена 77, 82), но механизм случайного выбора, упрощенный до предела, сработал не в их пользу (выбирался первый по списку кандидат среди равных по числу голосов).

Пример не слишком богат попевочными структурами: их три, и все они, по классификации А.~Н.~Кручининой \cite{kruch}, являются разновидностями <<кокиз>>, кадансовая структура которых представлена позициями 73--75, 83--85, 89--91. Наибольший же интерес представляет фрагмент между первым и вторым вхождением <<кокиз>> (поз. 76--83), содержащий тандемный повтор из 4 знамен (выделен скобками). Нетрудно видеть, что на нотолинейном уровне повтор искажается при переходе от <<крюка светлого>> (\includegraphics[height =12pt]{\hdir/z0121.eps}) к стопице (\includegraphics[height =12pt]{\hdir/z0201.eps}). Практически весь указанный фрагмент характеризуется пониженной дешифруемостью, хотя отличия от реального текста (вторая строка) касаются, в основном, лишь звуковысотной привязки
(интервально-ритмическая структура не нарушается). Более того, интерпретация <<стопицы с очком>> (\includegraphics[height =12pt]{\hdir/z0211.eps}, поз. 76) в тексте двознаменника (скачок вниз на две ступени) представляется менее предпочтительной, чем стандартный ход на одну ступень в реконструированном тексте.

Приведенный пример показывает, что тандемные повторы претендуют на роль самостоятельных структурных единиц знаменного распева и нуждаются в отдельном изучении. Первый шаг в этом направлении сделан в \cite{tandem}. Следует отметить также, что проявления тандемной повторности в знаменном распеве зависят от жанровой специфики. Так, например, биграмма \;
\includegraphics[height =12pt]{\hdir/z0111.eps}\;
\includegraphics[height =12pt]{\hdir/z1001.eps}\;
часто используется в тандемном варианте
$\bigl($\includegraphics[height =12pt]{\hdir/z0111.eps}\;
\includegraphics[height =12pt]{\hdir/z1001.eps}\;
\includegraphics[height =12pt]{\hdir/z0111.eps}\;
\includegraphics[height =12pt]{\hdir/z1001.eps} \; $\sim e2 * d1 * e2 * d1 \bigr )$ в песнопениях гласа 4 (<<Праздники>>), а в том же гласе всех Октоихов встречается всего 4 раза, не образует тандемных вхождений и имеет доминирующую интерпретацию $c2 * H1$, отличную от $e2 * d1$. Как следствие, данная цепочка в песнопениях гласа 4 (<<Праздники>>) интерпретируется неверно. Из этого следует, что кроме настройки на конкретный глас желательна настройка и на конкретный жанр.

\item Созданные для дешифровки электронные словари {ВИ} и {КВИ} можно рассматривать как \emph{систему описания гласов}, каждый из которых характеризуется достаточно представительным набором песнопений. Эти словари могут быть использованы не только для дешифровки песнопений, но и для решения вспомогательных задач, таких как определение гласовой принадлежности песнопения, обнаружение ошибок кодирования, выявление функционирующих в гласе структурных единиц и устойчивых их комбинаций, а также для \emph{количественной и качественной характеризации системы осмогласия} в целом.  В~последнем случае речь идет о выявлении сходства и различий между гласами.
\end{enumerate}

Применительно к задаче дешифровки нас больше интересует сходство гласов, а именно:
 наличие достаточно длинных общих для разных гласов цепочек знамен, одинаково
интерпретируемых в разных гласах --- своего рода \emph{межгласовых инвариантов}
({МИ}). Степень дешифруемости таких цепочек в разных гласах с помощью словарей {ВИ}
и {КВИ} может сильно отличаться, поскольку она зависит от частоты встречаемости цепочки в конкретном гласе и ее вариативности. В одном гласе она может попасть в словари {ВИ} и {КВИ} и иметь хорошие показатели по дешифруемости, а~в~другом~--- наоборот. В таком случае возникает возможность использования взаимосвязей между гласами на уровне
{МИ} для улучшения показателей дешифруемости одного гласа за счет другого. Фактически речь идет о дешифровке \emph{по прецедентам} (порой однократно встречающимся). Удобным инструментом для выявления межгласовых связей на уровне {МИ}
является предложенный авторами аппарат сложностных разложений \cite{samara},
в основе которого применительно к~рассматриваемому случаю лежит представление песнопений одного гласа в~виде конкатенации цепочек знамен (или нот) из песнопений другого гласа.

Цепочек, которые можно отнести к~категории {МИ}, достаточно много. Приведем лишь один пример, иллюстрирующий возможность дешифровки по прецедентам. При сравнении гласов 1 и 4 Октоиха 619/647 выявляется общая цепочка знамен из разных песнопений (глас 1: <<Слава и ныне. Богородичен>>, поз. 45 и глас 4:  <<На стиховне стихира>>, поз. 63):
\begin{center}
\begin{tabular}[c]{cccccc}
 \includegraphics[height =12pt]{\hdir/z1412.eps}  & \includegraphics[height =12pt]{\hdir/z0901.eps}  & \includegraphics[height =12pt]{\hdir/z1412.eps}&  \includegraphics[height =12pt]{\hdir/z1004.eps}  & \includegraphics[height =12pt]{\hdir/z1002.eps}   &  \includegraphics[height =12pt]{\hdir/z1001.eps}   \\
 $f4e4d2$ & $f4g4$ & $f8e8d4$ &  $f4g2f4$ &$e1$& $d1$.
\end{tabular}
\end{center}
В соответствии с \cite{kruch} --- это одна из разновидностей <<кулизм>>. С помощью словарей {ВИ}
и~{КВИ}, построенных для данного Октоиха, цепочка из гласа 1 дешифруется правильно, а~из гласа 4~--- с~ошибкой в интерпретации второго и третьего знамени. Эта ошибка может быть скорректирована на основе информации о наличии указанного выше {МИ} в~обуча\-ющей подборке.

\section{Заключение}

Проблема нотолинейной реконструкции (дешифровки) древнерусских церковных песно\-пе\-ний, представленных в~знаменной форме записи, является одной из наиболее известных и актуальных в музыкальной медиевистике. Трудности ее решения связаны с~многозначностью соответствия
<<зна\-мя--но\-та>>.  Авторы развивают новый ком\-пью\-тер\-но-ори\-ен\-ти\-ро\-ван\-ный подход к~ее решению, основанный на использовании
двознаменников конца XVII\,–-\,начала XVIII~в., записанных в виде трех \emph{параллельных} (синхронизованных между собой) \emph{текстов}: знаменного, нотолинейного и стихотворного (старослявянского). Дво\-зна\-мен\-ни\-ки нужны для того, чтобы извлечь из них информацию о наиболее устойчивых (наименее вариативных) структурных единицах знаменного распева, названных авторами инвариантами и~квазиинвариантами. Последние представлены в~единственно пригодном для дешифровки  формате <<беспометное знамя\,--\,нота>>.

На достаточно объемном обучающем материале построены электронные словари инвариантов и квазиинвариантов для каждого из гласов знаменного распева. Разработан алгоритм дешифровки знаменной нотации с использованием указанных словарей. Эксперименты на независимом  контрольном материале показали, что даже без апелляции
к~структурной организации знаменного распева (резерв для дальнейшего развития подхода) удается обеспечить в среднем  60\%--70\%-ную дешифруемость по гласам.

Разбор ошибок говорит о том, что часть из них --- это ошибки кодирования (авторские) и погрешности в самой певческой книге. Другая часть ошибок носит характер допустимого варьирования. Случаев радикального искажения нотолинейной структуры не отмечено.

Развитие подхода мыслится в направлении привлечения информации о внутренней структуре песнопений (попевки, лица, фиты, тандемные повторы). Важной может оказаться информация о взаимосвязях между гласами (приведены некоторые примеры и соображения на указанную тему). И, наконец, ощутимую пользу может принести настройка на отдельные классы песнопений (стихиры, ирмосы и др.).

К основным достоинствам  подхода можно отнести опору на \emph{двознаменники} периода наивысшего расцвета знаменного пения, ориентацию на  \emph{беспометную нотацию} и экспериментально подтвержденную применимость к песнопениям разного жанра.


\begin{thebibliography}{99}
\renewcommand{\bibname}{Литература}
\bibitem{Brazhnikov}
    \BibAuthor{Бражников\;М.\,В.}
    Древнерусская теория музыки. ---
    Л.: Музыка, 1972. 423~с.

\bibitem{Kutuzov}
    \BibAuthor{Кутузов\;Б.\,П.}
 	Русское знаменное пение.~---  2-е изд. --- М., 2008. 304~с.

\bibitem {ngk_2002}
	\BibAuthor{Бахмутова\; И.\,В., Гусев\; В.\,Д., Титкова\; Т.\,Н.}
{О функциях указательных помет (на материале двознаменника XVIII века)}~//
{Сибирский  музыкальный альманах}. ---  Новосибирск: Изд-во НГК, 2002. C. 81--92.

\bibitem {ngk_2004}
\BibAuthor{Бахмутова\; И.\,В., Гусев\; В.\,Д., Титкова\; Т.\,Н.}
{Факторы, влияющие на
 точность нотолинейной реконструкции пометных знаменных песнопений}~//
{Сибирский музыкальный альманах}. --- Новосибирск: Изд–во НГК, 2004. C.~51--59.

\bibitem {Metallov}
\BibAuthor{Металлов\; В.\,М.}
 Осмогласие знаменного распева (сборник нотолинейных попевок). --- М., 1899, 50~с.

\bibitem{vs174}
\BibAuthor{Бахмутова\; И.\,В., Гусев\; В.\,Д., Титкова\; Т.\,Н.}
{ Электронная азбука знаменного распева: Предварительная версия}~//
{Вычислительные системы}, 2005.  Вып.~174. C.~29--53.

\bibitem {fita}
\BibAuthor{Бражников М.В.}
 Лица и фиты знаменного распева. ---
 Л.: Музыка, 1984. 302 с.

\bibitem{muz_nauka}
\BibAuthor{Бахмутова\; И.\,В., Гусев\; В.\,Д., Титкова\; Т.\,Н.}
{Компьютерный поиск инвариантных  структурных единиц  знаменного распева}~//
{Проблемы музыкальной науки. Российский научный специализированный журнал}, 2011. \No\,1(8).  С.~20--24.

\bibitem{zont_2013}
\BibAuthor{Бахмутова\; И.\,В., Гусев\; В.\,Д., Титкова\; Т.\,Н.}
{Выявление инвариантов и квазиинвариантов знаменного распева с помощью билингв типа <<знамя-нота>>}~//
{Мат-лы Всеросс. конф. ЗОНТ--2013}, 2013.
Т.~1. C.~27--35.

\bibitem{kruch}
\BibAuthor{Кручинина \; А.\,Н.}
{Попевка в русской музыкальной теории XVII века.} Автореф. дисс.\
\ldots канд. иск. н.~--- Л., 1979.

\bibitem{tandem}
    \BibAuthor{Бахмутова\; И.\,В., Гусев\; В.\,Д.,  Мирошниченко\; Л.\,А., Титкова\; Т.\,Н. }
{Тандемные повторы в знаменных песнопениях}~//
{Вычислительные системы},  2005. Вып.~174. C.~13--28.

\bibitem{samara}
\BibAuthor{Gusev\; V.\,D.,   Miroshnichenko \; L.\,A.}
{Complexity expansions in comparisons of character sequences}~//
{Pattern Recogn. Image Anal.}, 2014. Vol.~24. Iss.~4. P.~467--472.
{\sf http://link.springer.com/article/10.1134/S1054661814040063}.

\end{thebibliography}

\renewcommand{\bibname}{References}
\begin{thebibliography}{99}
\bibitem{Brazhnikov}
{Brazhnikov,\;M.\,V.} 1972.
\BibTitle{Drevnerusskaya teoriya muzyki} [Ancient Russian theory of music].
        Leningrad: Music. 423~p.

\bibitem{Kutuzov}
{Kutuzov,\;B.\,P.} 2008.
\BibTitle{Russkoe znamennoe penie} [Russian znamennyi chant].
 Moscow. 304~p.

\bibitem {ngk_2002}
{Bakhmutova,\;I.\,V., V.\,D.\;Gusev, and T\,N.\;Titkova.} 2002.
{On functions of the indicative marks (in the material of dvoyeznamenniks XVIII sc.)}.
\BibJournal{Siberian Musical Almanac}. Novosibirsk: NGK.  81--92.

\bibitem {ngk_2004}
{Bakhmutova,\;I.\,V., V.\,D.\;Gusev, and T.\,N.\;Titkova.} 2004.
{Factors acting on accuracy of the noted reconstruction of Russian znamennyi marked hymnals}.
 \BibJournal{Siberian Musical Almanac}.  Novosibirsk: NGK. 51--59.

\bibitem {Metallov}
{Metallov,\;V.\,M.} 1899.
\BibTitle{Osmoglasie of znamennyi chant} [Set of noted popevoks].
 Мoscow. 50~p.

\bibitem{vs174}
{Bakhmutova,\; I.\,V.,  V.\,D.\;Gusev, and T\,N.\;Titkova.} 2005.
{ Electronic alphabeth of Russian chant: Previous version.}
\BibJournal{Computing Syst}. 174:29--53.

\bibitem {fita}
{Brazhnikov,\;M.\,V.}
1984. \BibTitle{Litsa and fitas of Russian znamennyi chant}.
 Leningrad: Music. 302~p.

\bibitem{muz_nauka}
{Bakhmutova,\;I.\,V., V.\,D.\;Gusev, and T\,N.\; Titkova.} 2011.
{Computerized search for the invariant structural elements of znamennyi chant}.
\BibJournal{Music Scholarship} 1(8):20--24.

\bibitem{zont_2013}
{Bakhmutova,\;I.\,V., V.\,D.\;Gusev, and T\,N.\;Titkova}. 2013.
{Revelation of invariants and quasi-invariants of znamennyi chant using ``neume-note'' bilinguas}.
\BibJournal{Russian Conference KONT-2013 Proceedings}. Novosibirsk.
1:27--35.

\bibitem{kruch}
{Kruchinina,\;A.\,N.} 1979.
{Popevka in Russian musical theory of XVII sc.} Ph.D. Thesis.
 Leningrad.

\bibitem{tandem}
{Bakhmutova,\;I.\,V., V.\,D.\;Gusev, L.\,A.\;Miroshnichenko,
and T.\,N.\;Titkova}. 2005.
{Tandem repeats in the neume hymns}.
  \BibJournal{Computing Systems}  174:13--28.
\bibitem{samara}
{Gusev,\;V.\,D.,  and L.\,A.\;Miroshnichenko}. 2014.
{Complexity expansions in comparisons of character sequences}.
\BibJournal{Pattern Recogn. Image Anal.} 24(4):467--472.
Available at: {\sf http://\linebreak link.springer.com/article/10.1134/S1054661814040063}
(accessed December~28, 2015).

\end{thebibliography}
\end{document}



% Решение Программного Комитета:
%\ACCEPTNOTE
%\AMENDNOTE
%\REJECTNOTE
\end{document}

